---
kind: wick/component@v1
name: 'test'
import:
  - name: http
    component:
      kind: wick/component/types@v1
      ref: ../../../../crates/interfaces/wick-interface-http/component.yaml
  - name: AAA
    component:
      kind: wick/component/types@v1
      ref: ../../../../crates/interfaces/wick-interface-http/component.yaml
  - name: ZZZ
    component:
      kind: wick/component/types@v1
      ref: ../../../../crates/interfaces/wick-interface-http/component.yaml
types:
  - name: LocalStruct
    kind: wick/type/struct@v1

    description: 'hey'
    fields:
      - name: field1
        type: string
      - name: inner
        type: LocalStructInner
  - name: LocalStructInner
    kind: wick/type/struct@v1
    fields:
      - name: field1
        type: string
      - name: field2
        type: string
component:
  kind: wick/component/composite@v1
  operations:
    - name: echo
      inputs:
        - name: input
          type: http::HttpRequest
      outputs:
        - name: output
          type: http::HttpRequest
      flow:
        - <>.input -> <>.output
    - name: testop
      with:
        - name: A
          type: string
        - name: B
          type: u32
      inputs:
        - name: message
          type: http::HttpResponse
      outputs:
        - name: output
          type: string
      flow:
        - <>.message -> <>.output
tests:
  - name: type_test
    cases:
      - name: codegenned-defaults
        operation: echo
        input:
          - name: input
            value:
              method: Get
              scheme: Http
              path: '/'
              uri: 'http://localhost:8080/'
        output:
          - name: output
            value:
              method: Get
              scheme: Http
              path: '/'
              uri: 'http://localhost:8080/'
