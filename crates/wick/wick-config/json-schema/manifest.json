{
  "title": "JSON schema for Wick applications and components",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "$defs": {
    "v0": {
      "HostManifest": {
        "$anchor": "#v0/HostManifest",
        "additionalProperties": false,
        "properties": {
          "format": {
            "description": "The configuration manifest format.",
            "enum": [
              0
            ]
          },
          "version": {
            "description": "The version of the configuration.",
            "type": "string"
          },
          "host": {
            "description": "Additional host configuration.",
            "$ref": "#/$defs/v0/HostConfig"
          },
          "network": {
            "description": "The configuration for a Wick network.",
            "$ref": "#/$defs/v0/NetworkManifest"
          },
          "default_schematic": {
            "description": "The default schematic to execute if none is provided.",
            "required": false,
            "type": "string"
          }
        },
        "required": [
          "format"
        ]
      },
      "HostConfig": {
        "$anchor": "#v0/HostConfig",
        "additionalProperties": false,
        "properties": {
          "allow_latest": {
            "description": "Whether or not to allow the :latest tag on remote artifacts.",
            "type": "boolean"
          },
          "insecure_registries": {
            "description": "A list of registries to connect to insecurely (over HTTP vs HTTPS).",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "timeout": {
            "description": "The timeout for network requests (in ms).",
            "type": "number"
          },
          "id": {
            "description": "The ID for this host, used to identify the host over the mesh.",
            "required": false,
            "type": "string"
          },
          "expose": {
            "description": "The schematics to expose via RPC or the mesh, if any.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "mesh": {
            "description": "The mesh configuration.",
            "required": false,
            "$ref": "#/$defs/v0/MeshConfig"
          },
          "rpc": {
            "description": "Configuration for the GRPC server.",
            "required": false,
            "$ref": "#/$defs/v0/HttpConfig"
          },
          "http": {
            "description": "Configuration for the HTTP 1 server (development only).",
            "required": false,
            "$ref": "#/$defs/v0/HttpConfig"
          }
        },
        "required": []
      },
      "HttpConfig": {
        "$anchor": "#v0/HttpConfig",
        "additionalProperties": false,
        "properties": {
          "enabled": {
            "description": "Enable/disable the server.",
            "type": "boolean"
          },
          "port": {
            "description": "The port to bind to.",
            "required": false,
            "type": "number"
          },
          "address": {
            "description": "The address to bind to.",
            "required": false,
            "type": "string"
          },
          "pem": {
            "description": "Path to pem file for TLS.",
            "required": false,
            "type": "string"
          },
          "key": {
            "description": "Path to key file for TLS.",
            "required": false,
            "type": "string"
          },
          "ca": {
            "description": "Path to CA file.",
            "required": false,
            "type": "string"
          }
        },
        "required": []
      },
      "MeshConfig": {
        "$anchor": "#v0/MeshConfig",
        "additionalProperties": false,
        "properties": {
          "enabled": {
            "description": "Enable/disable the mesh connection.",
            "type": "boolean"
          },
          "address": {
            "description": "The address of the NATS server.",
            "type": "string"
          },
          "creds_path": {
            "description": "The path to the NATS credsfile.",
            "required": false,
            "type": "string"
          },
          "token": {
            "description": "The NATS token.",
            "required": false,
            "type": "string"
          }
        },
        "required": []
      },
      "NetworkManifest": {
        "$anchor": "#v0/NetworkManifest",
        "additionalProperties": false,
        "properties": {
          "name": {
            "description": "The unique identifier for this Network.",
            "required": false,
            "type": "string"
          },
          "labels": {
            "description": "The labels that apply to this network.",
            "type": "object",
            "patternProperties": {
              "[a-zA-Z0-9][a-zA-Z0-9_]*": {
                "type": "string"
              }
            }
          },
          "triggers": {
            "description": "The collection to use as the entrypoint when running as a standalone process.",
            "required": false,
            "$ref": "#/$defs/v0/EntrypointDefinition"
          },
          "schematics": {
            "description": "The links between capabilities and components.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v0/SchematicManifest"
            }
          },
          "collections": {
            "description": "A list of component collections.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v0/CollectionDefinition"
            }
          }
        },
        "required": []
      },
      "EntrypointDefinition": {
        "$anchor": "#v0/EntrypointDefinition",
        "additionalProperties": false,
        "properties": {
          "reference": {
            "description": "The reference/location of the collection.",
            "type": "string"
          },
          "component": {
            "description": "The component to use as the entrypoint.",
            "type": "string"
          },
          "data": {
            "description": "Data or configuration used to initialize the collection.",
            "type": "object"
          }
        },
        "required": []
      },
      "CollectionDefinition": {
        "$anchor": "#v0/CollectionDefinition",
        "additionalProperties": false,
        "properties": {
          "namespace": {
            "description": "The local namespace for the collection.",
            "type": "string"
          },
          "kind": {
            "description": "The kind/type of the collection.",
            "$ref": "#/$defs/v0/CollectionKind"
          },
          "reference": {
            "description": "The reference/location of the collection.",
            "type": "string"
          },
          "data": {
            "description": "Data or configuration used to initialize the collection.",
            "type": "object"
          }
        },
        "required": []
      },
      "CollectionKind": {
        "$anchor": "#v0/CollectionKind",
        "enum": [
          "Native",
          "GrpcUrl",
          "WaPC",
          "Network"
        ]
      },
      "SchematicManifest": {
        "$anchor": "#v0/SchematicManifest",
        "additionalProperties": false,
        "properties": {
          "name": {
            "description": "Schematic name.",
            "type": "string"
          },
          "collections": {
            "description": "A list of collections the schematic uses.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "instances": {
            "description": "A map from component reference to its target.",
            "type": "object",
            "patternProperties": {
              "[a-zA-Z0-9][a-zA-Z0-9_]*": {
                "$ref": "#/$defs/v0/ComponentDefinition"
              }
            }
          },
          "connections": {
            "description": "A list of connections from component to component.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v0/ConnectionDefinition"
            }
          },
          "constraints": {
            "description": "A map of constraints and values that limit where this schematic can run.",
            "type": "object",
            "patternProperties": {
              "[a-zA-Z0-9][a-zA-Z0-9_]*": {
                "type": "string"
              }
            }
          }
        },
        "required": [
          "name"
        ]
      },
      "ComponentDefinition": {
        "$anchor": "#v0/ComponentDefinition",
        "additionalProperties": false,
        "properties": {
          "id": {
            "description": "The ID of the component (i.e. the alias, key, or namespace).",
            "type": "string"
          },
          "data": {
            "description": "Data to associate with the reference.",
            "required": false,
            "type": "object"
          }
        },
        "required": [
          "id"
        ]
      },
      "ConnectionDefinition": {
        "$anchor": "#v0/ConnectionDefinition",
        "additionalProperties": false,
        "properties": {
          "from": {
            "description": "The originating component from upstream.",
            "$ref": "#/$defs/v0/ConnectionTargetDefinition"
          },
          "to": {
            "description": "The destination component (downstream).",
            "$ref": "#/$defs/v0/ConnectionTargetDefinition"
          }
        },
        "required": []
      },
      "ConnectionTargetDefinition": {
        "$anchor": "#v0/ConnectionTargetDefinition",
        "additionalProperties": false,
        "properties": {
          "instance": {
            "description": "The instance name of the referenced component.",
            "type": "string"
          },
          "port": {
            "description": "The component&#x27;s port.",
            "type": "string"
          },
          "data": {
            "description": "Data to associate with a connection.",
            "required": false,
            "type": "object"
          }
        },
        "required": [
          "instance",
          "port"
        ]
      }
    },
    "v1": {
      "WickConfig": {
        "oneOf": [
          {
            "$ref": "#/$defs/v1/AppConfiguration"
          },
          {
            "$ref": "#/$defs/v1/ComponentConfiguration"
          },
          {
            "$ref": "#/$defs/v1/TypesConfiguration"
          },
          {
            "$ref": "#/$defs/v1/TestConfiguration"
          }
        ]
      },
      "LocationReference": {
        "type": "object"
      },
      "AppConfiguration": {
        "$anchor": "#v1/AppConfiguration",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/app@v1"
            ]
          },
          "metadata": {
            "description": "Associated metadata for this component.",
            "required": false,
            "$ref": "#/$defs/v1/Metadata"
          },
          "name": {
            "description": "The application&#x27;s name.",
            "type": "string"
          },
          "host": {
            "description": "Configuration that controls how this application runs within a host.",
            "$ref": "#/$defs/v1/HostConfig"
          },
          "import": {
            "description": "Components to import into the application&#x27;s scope.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/ComponentBinding"
            }
          },
          "resources": {
            "description": "Resources that the application can access.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/ResourceBinding"
            }
          },
          "triggers": {
            "description": "Configured triggers that drive the application&#x27;s behavior.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/TriggerDefinition"
            }
          }
        },
        "required": []
      },
      "Metadata": {
        "$anchor": "#v1/Metadata",
        "additionalProperties": false,
        "properties": {
          "version": {
            "description": "The version of the component or application.",
            "type": "string"
          },
          "authors": {
            "description": "The authors of the component or application.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "vendors": {
            "description": "Any vendors associated with the component or application.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "description": {
            "description": "A short description of the component or application.",
            "required": false,
            "type": "string"
          },
          "documentation": {
            "description": "Where to find documentation for the component or application.",
            "required": false,
            "type": "string"
          },
          "licenses": {
            "description": "The license(s) for the component or application.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "icon": {
            "description": "The icon for the component or application.",
            "type": "string"
          }
        },
        "required": []
      },
      "TriggerDefinition": {
        "oneOf": [
          {
            "$ref": "#/$defs/v1/CliTrigger"
          },
          {
            "$ref": "#/$defs/v1/HttpTrigger"
          }
        ]
      },
      "CliTrigger": {
        "$anchor": "#v1/CliTrigger",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/trigger/cli@v1"
            ]
          },
          "operation": {
            "description": "The operation that will act as the main entrypoint for this trigger.",
            "$ref": "#/$defs/v1/ComponentOperationExpression"
          },
          "app": {
            "description": "The component that provides additional logic.",
            "required": false,
            "oneOf": [
              {
                "type": "string"
              },
              {
                "$ref": "#/$defs/v1/ComponentDefinition"
              }
            ]
          }
        },
        "required": [
          "operation"
        ]
      },
      "ComponentOperationExpression": {
        "$anchor": "#v1/ComponentOperationExpression",
        "additionalProperties": false,
        "properties": {
          "component": {
            "description": "The component that exports the operation.",
            "oneOf": [
              {
                "type": "string"
              },
              {
                "$ref": "#/$defs/v1/ComponentDefinition"
              }
            ]
          },
          "name": {
            "description": "The operation to call.",
            "type": "string"
          }
        },
        "required": [
          "component",
          "name"
        ]
      },
      "HttpTrigger": {
        "$anchor": "#v1/HttpTrigger",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/trigger/http@v1"
            ]
          },
          "resource": {
            "description": "The TcpPort reference to listen on for connections.",
            "type": "string"
          },
          "routers": {
            "description": "The HttpRouters that should handle incoming requests",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/HttpRouter"
            }
          }
        },
        "required": []
      },
      "HttpRouter": {
        "oneOf": [
          {
            "$ref": "#/$defs/v1/RawRouter"
          },
          {
            "$ref": "#/$defs/v1/RestRouter"
          }
        ]
      },
      "RestRouter": {
        "$anchor": "#v1/RestRouter",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/router/rest@v1"
            ]
          },
          "path": {
            "description": "The path to start serving this router from.",
            "type": "string"
          },
          "component": {
            "description": "The component to expose as a Rest API.",
            "$ref": "#/$defs/v1/ComponentDefinition"
          }
        },
        "required": [
          "path",
          "component"
        ]
      },
      "RawRouter": {
        "$anchor": "#v1/RawRouter",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/router/raw@v1"
            ]
          },
          "path": {
            "description": "The path to start serving this router from.",
            "type": "string"
          },
          "operation": {
            "description": "The operation that handles HTTP requests.",
            "$ref": "#/$defs/v1/ComponentOperationExpression"
          }
        },
        "required": [
          "path",
          "operation"
        ]
      },
      "ResourceDefinition": {
        "oneOf": [
          {
            "$ref": "#/$defs/v1/TcpPort"
          },
          {
            "$ref": "#/$defs/v1/UdpPort"
          }
        ]
      },
      "TcpPort": {
        "$anchor": "#v1/TcpPort",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/resource/tcpport@v1"
            ]
          },
          "port": {
            "description": "The port to bind to.",
            "type": "number"
          },
          "address": {
            "description": "The address to bind to.",
            "type": "string"
          }
        },
        "required": []
      },
      "UdpPort": {
        "$anchor": "#v1/UdpPort",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/resource/udpport@v1"
            ]
          },
          "port": {
            "description": "The port to bind to.",
            "type": "number"
          },
          "address": {
            "description": "The address to bind to.",
            "type": "string"
          }
        },
        "required": []
      },
      "TypesConfiguration": {
        "$anchor": "#v1/TypesConfiguration",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/types@v1"
            ]
          },
          "name": {
            "description": "The name of this component.",
            "required": false,
            "type": "string"
          },
          "types": {
            "description": "Additional types to export and make available to the component.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/TypeDefinition"
            }
          }
        },
        "required": []
      },
      "TestConfiguration": {
        "$anchor": "#v1/TestConfiguration",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/tests@v1"
            ]
          },
          "name": {
            "description": "The name of this component.",
            "required": false,
            "type": "string"
          },
          "tests": {
            "description": "Unit tests to run against components and operations.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/TestDefinition"
            }
          }
        },
        "required": []
      },
      "ComponentConfiguration": {
        "$anchor": "#v1/ComponentConfiguration",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/component@v1"
            ]
          },
          "name": {
            "description": "The name of this component.",
            "required": false,
            "type": "string"
          },
          "metadata": {
            "description": "Associated metadata for this component.",
            "required": false,
            "$ref": "#/$defs/v1/Metadata"
          },
          "host": {
            "description": "Configuration for when wick hosts this component as a service.",
            "$ref": "#/$defs/v1/HostConfig"
          },
          "labels": {
            "description": "The labels and values that apply to this manifest.",
            "type": "object",
            "patternProperties": {
              "[a-zA-Z0-9][a-zA-Z0-9_]*": {
                "type": "string"
              }
            }
          },
          "component": {
            "description": "Configuration specific to different kinds of components.",
            "$ref": "#/$defs/v1/ComponentKind"
          },
          "tests": {
            "description": "Assertions that can be run against the component to validate its behavior.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/TestDefinition"
            }
          }
        },
        "required": [
          "component"
        ]
      },
      "ComponentKind": {
        "oneOf": [
          {
            "$ref": "#/$defs/v1/WasmComponentConfiguration"
          },
          {
            "$ref": "#/$defs/v1/CompositeComponentConfiguration"
          }
        ]
      },
      "CompositeComponentConfiguration": {
        "$anchor": "#v1/CompositeComponentConfiguration",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/component/composite@v1"
            ]
          },
          "types": {
            "description": "Additional types to export and make available to the component.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/TypeDefinition"
            }
          },
          "import": {
            "description": "Components to import into the application&#x27;s scope.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/ComponentBinding"
            }
          },
          "operations": {
            "description": "A list of operations implemented by the Composite component.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/CompositeOperationDefinition"
            }
          }
        },
        "required": []
      },
      "WasmComponentConfiguration": {
        "$anchor": "#v1/WasmComponentConfiguration",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/component/wasmrs@v1"
            ]
          },
          "ref": {
            "description": "A reference to a local WebAssembly implementation",
            "type": "string"
          },
          "types": {
            "description": "Additional types to export and make available to the component.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/TypeDefinition"
            }
          },
          "operations": {
            "description": "A list of operations implemented by the WebAssembly module.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/OperationDefinition"
            }
          }
        },
        "required": [
          "ref"
        ]
      },
      "ResourceBinding": {
        "$anchor": "#v1/ResourceBinding",
        "additionalProperties": false,
        "properties": {
          "name": {
            "description": "The name of the binding.",
            "type": "string"
          },
          "resource": {
            "description": "The resource to bind to.",
            "$ref": "#/$defs/v1/ResourceDefinition"
          }
        },
        "required": [
          "name",
          "resource"
        ]
      },
      "ComponentBinding": {
        "$anchor": "#v1/ComponentBinding",
        "additionalProperties": false,
        "properties": {
          "name": {
            "description": "The name of the binding.",
            "type": "string"
          },
          "component": {
            "description": "The component to bind to.",
            "$ref": "#/$defs/v1/ComponentDefinition"
          }
        },
        "required": [
          "name",
          "component"
        ]
      },
      "ComponentDefinition": {
        "oneOf": [
          {
            "$ref": "#/$defs/v1/GrpcUrlComponent"
          },
          {
            "$ref": "#/$defs/v1/ManifestComponent"
          },
          {
            "$ref": "#/$defs/v1/ComponentReference"
          }
        ]
      },
      "ComponentReference": {
        "$anchor": "#v1/ComponentReference",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/component/reference@v1"
            ]
          },
          "id": {
            "description": "The id of the component to reference.",
            "type": "string"
          }
        },
        "required": [
          "id"
        ]
      },
      "HostConfig": {
        "$anchor": "#v1/HostConfig",
        "additionalProperties": false,
        "properties": {
          "allow_latest": {
            "description": "Whether or not to allow the :latest tag on remote artifacts.",
            "type": "boolean"
          },
          "insecure_registries": {
            "description": "A list of registries to connect to insecurely (over HTTP vs HTTPS).",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "timeout": {
            "description": "The timeout for network requests (in ms).",
            "type": "number"
          },
          "rpc": {
            "description": "Configuration for the GRPC server.",
            "required": false,
            "$ref": "#/$defs/v1/HttpConfig"
          }
        },
        "required": []
      },
      "HttpConfig": {
        "$anchor": "#v1/HttpConfig",
        "additionalProperties": false,
        "properties": {
          "enabled": {
            "description": "Enable/disable the server.",
            "type": "boolean"
          },
          "port": {
            "description": "The port to bind to.",
            "required": false,
            "type": "number"
          },
          "address": {
            "description": "The address to bind to.",
            "required": false,
            "type": "string"
          },
          "pem": {
            "description": "Path to pem file for TLS.",
            "required": false,
            "type": "string"
          },
          "key": {
            "description": "Path to key file for TLS.",
            "required": false,
            "type": "string"
          },
          "ca": {
            "description": "Path to CA file.",
            "required": false,
            "type": "string"
          }
        },
        "required": []
      },
      "Permissions": {
        "$anchor": "#v1/Permissions",
        "additionalProperties": false,
        "properties": {
          "dirs": {
            "description": "A map of from internal directory to external directory that this component should be able to access.",
            "type": "object",
            "patternProperties": {
              "[a-zA-Z0-9][a-zA-Z0-9_]*": {
                "type": "string"
              }
            }
          }
        },
        "required": []
      },
      "GrpcUrlComponent": {
        "$anchor": "#v1/GrpcUrlComponent",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/component/grpc@v1"
            ]
          },
          "url": {
            "description": "The GRPC URL to connect to.",
            "type": "string"
          },
          "config": {
            "description": "Any configuration necessary for the component."
          }
        },
        "required": [
          "url"
        ]
      },
      "ManifestComponent": {
        "$anchor": "#v1/ManifestComponent",
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string",
            "description": "The kind of the collection",
            "enum": [
              "wick/component/manifest@v1"
            ]
          },
          "ref": {
            "description": "The URL (and optional tag) or local file path to find the manifest.",
            "type": "string"
          },
          "config": {
            "description": "Any configuration necessary for the component."
          }
        },
        "required": [
          "ref"
        ]
      },
      "CompositeOperationDefinition": {
        "$anchor": "#v1/CompositeOperationDefinition",
        "additionalProperties": false,
        "properties": {
          "name": {
            "description": "The name of the operation.",
            "type": "string"
          },
          "inputs": {
            "description": "Types of the inputs to the operation.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/Field"
            }
          },
          "outputs": {
            "description": "Types of the outputs to the operation.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/Field"
            }
          },
          "components": {
            "description": "A list of components the schematic can use.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "instances": {
            "description": "A map of IDs to specific operation.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/InstanceBinding"
            }
          },
          "flow": {
            "description": "A list of connections from operation to operation.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/ConnectionDefinition"
            }
          }
        },
        "required": []
      },
      "OperationDefinition": {
        "$anchor": "#v1/OperationDefinition",
        "additionalProperties": false,
        "properties": {
          "name": {
            "description": "The name of the operation.",
            "type": "string"
          },
          "inputs": {
            "description": "Types of the inputs to the operation.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/Field"
            }
          },
          "outputs": {
            "description": "Types of the outputs to the operation.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/Field"
            }
          }
        },
        "required": []
      },
      "Field": {
        "type": "object"
      },
      "TypeDefinition": {
        "type": "object"
      },
      "InstanceBinding": {
        "$anchor": "#v1/InstanceBinding",
        "additionalProperties": false,
        "properties": {
          "name": {
            "description": "The name of the binding.",
            "type": "string"
          },
          "operation": {
            "description": "The operation to bind to.",
            "$ref": "#/$defs/v1/ComponentOperationExpression"
          },
          "config": {
            "description": "Data to associate with the reference, if any.",
            "required": false
          }
        },
        "required": [
          "name",
          "operation"
        ]
      },
      "ConnectionDefinition": {
        "$anchor": "#v1/ConnectionDefinition",
        "additionalProperties": false,
        "properties": {
          "from": {
            "description": "The upstream operation port.",
            "$ref": "#/$defs/v1/ConnectionTargetDefinition"
          },
          "to": {
            "description": "The downstream operation port.",
            "$ref": "#/$defs/v1/ConnectionTargetDefinition"
          }
        },
        "required": [
          "from",
          "to"
        ]
      },
      "ConnectionTargetDefinition": {
        "$anchor": "#v1/ConnectionTargetDefinition",
        "additionalProperties": false,
        "properties": {
          "instance": {
            "description": "The instance ID of the operation.",
            "type": "string"
          },
          "port": {
            "description": "The operation port.",
            "type": "string"
          },
          "data": {
            "description": "The default value to provide on this connection in the event of an error.",
            "required": false
          }
        },
        "required": [
          "instance",
          "port"
        ]
      },
      "TestDefinition": {
        "$anchor": "#v1/TestDefinition",
        "additionalProperties": false,
        "properties": {
          "name": {
            "description": "The name of the test.",
            "type": "string"
          },
          "operation": {
            "description": "The operaton to test.",
            "type": "string"
          },
          "inherent": {
            "description": "Inherent data to use for the test.",
            "required": false,
            "$ref": "#/$defs/v1/InherentData"
          },
          "input": {
            "description": "The inputs to the test.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/PacketData"
            }
          },
          "output": {
            "description": "The expected outputs of the operation.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/v1/PacketData"
            }
          }
        },
        "required": [
          "name",
          "operation"
        ]
      },
      "InherentData": {
        "$anchor": "#v1/InherentData",
        "additionalProperties": false,
        "properties": {
          "seed": {
            "description": "An RNG seed.",
            "required": false,
            "type": "number"
          },
          "timestamp": {
            "description": "A timestamp.",
            "required": false,
            "type": "number"
          }
        },
        "required": []
      },
      "PacketData": {
        "oneOf": [
          {
            "$ref": "#/$defs/v1/PayloadData"
          },
          {
            "$ref": "#/$defs/v1/ErrorData"
          }
        ]
      },
      "PayloadData": {
        "$anchor": "#v1/PayloadData",
        "additionalProperties": false,
        "properties": {
          "name": {
            "description": "The name of the port to send the data to.",
            "type": "string"
          },
          "flags": {
            "description": "Any flags set on the packet.",
            "required": false,
            "$ref": "#/$defs/v1/PacketFlags"
          },
          "data": {
            "description": "The data to send.",
            "required": false
          }
        },
        "required": [
          "name"
        ]
      },
      "ErrorData": {
        "$anchor": "#v1/ErrorData",
        "additionalProperties": false,
        "properties": {
          "name": {
            "description": "The name of the port to send the data to.",
            "type": "string"
          },
          "flags": {
            "description": "Any flags set on the packet.",
            "required": false,
            "$ref": "#/$defs/v1/PacketFlags"
          },
          "message": {
            "description": "The error message.",
            "type": "string"
          }
        },
        "required": [
          "name",
          "message"
        ]
      },
      "PacketFlags": {
        "$anchor": "#v1/PacketFlags",
        "additionalProperties": false,
        "properties": {
          "done": {
            "description": "When set, indicates the port should be considered closed.",
            "type": "boolean"
          },
          "open": {
            "description": "When set, indicates the opening of a new substream context within the parent stream.",
            "type": "boolean"
          },
          "close": {
            "description": "When set, indicates the closing of a substream context within the parent stream.",
            "type": "boolean"
          }
        },
        "required": []
      }
    }
  },
  "oneOf": [
    {
      "$ref": "#/$defs/v1/AppConfiguration"
    },
    {
      "$ref": "#/$defs/v1/ComponentConfiguration"
    },
    {
      "$ref": "#/$defs/v1/TypesConfiguration"
    },
    {
      "$ref": "#/$defs/v1/TestConfiguration"
    },
    {
      "$ref": "#/$defs/v0/HostManifest"
    }
  ]
}
